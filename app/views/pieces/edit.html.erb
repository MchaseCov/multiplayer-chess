<%= turbo_frame_tag id="chess_#{dom_id(@game)}", class:"w-full", target: '_top' do%>
  <h2 class="text-center font-bold text-2xl"><%=@game.turn ? "Color's turn! (#{@game.color_player.username})" : "White's turn! (#{@game.white_player.username})" %></h2>
  <div class="grid grid-cols-8 w-max gap-2 chess-board">
    <%@game.squares.board_order.each do |square|%>
      <% if @squares.include?(square) %>
        <%= button_to  controller: "pieces", action: "update_#{@piece.type.downcase}", piece_id: @piece, square: square.id, class:"block border-2 w-32 h-32 text-center chess-square bg-indigo-400", id:"#{square.coordinate}" do %>
          <%=square.visual_coordinate%> <br>
          <% if square.piece %>
            <i class="fas fa-chess-<%=square.piece.type.downcase%> text-4xl <%=square.piece.color? ? "text-neutral-900" : "text-neutral-50 white-piece" %>"></i>
          <% end %>
        <% end %>
      <% else %>
        <div class="border-2 w-32 h-32 text-center chess-square" id="<%=square.coordinate%>">
          <%=square.visual_coordinate%> <br>
          <% if square.piece == @piece%>
            <%= link_to @game do %>
              <i class="fas fa-chess-<%=square.piece.type.downcase%> text-4xl  text-amber-400 white-piece"></i>
            <% end %>
          <% elsif square.piece %>
            <i class="fas fa-chess-<%=square.piece.type.downcase%> text-4xl <%=square.piece.color? ? "text-neutral-900" : "text-neutral-50 white-piece" %>"></i>
          <% end %>
        </div>
      <% end %>
    <% end %>
  </div>
  Taken pieces:
  <%@game.taken_pieces.each do |p|%>
    <i class="fas fa-chess-<%=p.type.downcase%> text-4xl <%=p.color? ? "text-neutral-900" : "text-neutral-50 white-piece" %>"></i>
  <% end %>
<% end %>
